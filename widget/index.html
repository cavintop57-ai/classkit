<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>우리반 위젯</title>
  <link rel="stylesheet" href="./src/style.css">
  <link rel="stylesheet" href="./src/toonAvatarEditor.css">
</head>
<body data-mode="widget">
  <div id="app">
    <!-- 모드 전환 버튼 -->
    <div class="mode-controls">
      <button class="mode-btn active" id="btn-widget" data-mode="widget">
        <span class="mode-emoji">🚀</span>
        <span class="mode-name">우주 위젯</span>
        <span class="mode-shortcut">F1</span>
      </button>
      <button class="mode-btn" id="btn-board" data-mode="board">
        <span class="mode-emoji">📝</span>
        <span class="mode-name">판서 모드</span>
        <span class="mode-shortcut">F1</span>
      </button>
      <button class="mode-btn" id="btn-manage">
        <span class="mode-emoji">⚙️</span>
        <span class="mode-name">우리반 관리</span>
        <span class="mode-shortcut">M</span>
      </button>
      <button class="fullscreen-btn" id="btn-fullscreen">
        <span class="fullscreen-emoji">⛶</span>
        <span class="fullscreen-name">전체화면</span>
        <span class="fullscreen-shortcut">F11</span>
      </button>
      <button class="mode-btn logout-btn" id="btn-logout">
        <span class="mode-emoji">🚪</span>
        <span class="mode-name">로그아웃</span>
      </button>
      <button class="mode-btn" id="btn-timer">
        <span class="mode-emoji">⏱️</span>
        <span class="mode-name">타이머</span>
      </button>
    </div>

    <!-- 타이머 카드 -->
    <div class="timer-card" id="timer-card">
      <div class="timer-header">
        <span class="timer-title">⏱️ 타이머</span>
      </div>
      <div class="timer-adjust">
        <button class="timer-arrow" id="timer-increase" title="1분 추가">▲</button>
        <div class="timer-display" id="timer">10:00</div>
        <button class="timer-arrow" id="timer-decrease" title="1분 감소">▼</button>
      </div>
      <div class="timer-controls">
        <button class="timer-btn timer-start" id="timer-start-btn">
          <span class="timer-btn-icon">▶️</span>
          <span class="timer-btn-text">시작하기</span>
        </button>
        <button class="timer-btn timer-reset" id="timer-reset-btn">
          <span class="timer-btn-icon">🔄</span>
          <span class="timer-btn-text">초기화</span>
        </button>
      </div>
    </div>

    <!-- QR 코드 카드 -->
    <div class="qr-card" id="qr-card">
      <div class="qr-header">📱 학생 접속</div>
      <div class="qr-code" id="qr-code">
        <!-- QR 코드가 여기에 표시됩니다 -->
      </div>
      <div class="qr-url" id="qr-url">연결 중...</div>
    </div>

    <!-- 시간표 카드 -->
    <div class="timetable-card" id="timetable-card">
      <div class="timetable-header">
        <span class="timetable-title">📅 시간표</span>
        <span class="timetable-date" id="timetable-date">월요일</span>
      </div>
      <div class="timetable-body" id="timetable-body">
        <div class="timetable-empty">시간표를 등록해주세요</div>
      </div>
    </div>

    <!-- 스톱워치 카드 (수업시간 모드) -->
    <div class="stopwatch-card" id="stopwatch-card">
      <div class="stopwatch-header">
        <span class="stopwatch-title">⏱️ 스톱워치</span>
      </div>
      <div class="stopwatch-display" id="stopwatch">00:00.00</div>
      <div class="stopwatch-controls">
        <button class="stopwatch-btn stopwatch-start" id="stopwatch-start-btn">
          <span class="stopwatch-btn-icon">▶️</span>
          <span class="stopwatch-btn-text">시작</span>
        </button>
        <button class="stopwatch-btn stopwatch-reset" id="stopwatch-reset-btn">
          <span class="stopwatch-btn-icon">🔄</span>
          <span class="stopwatch-btn-text">초기화</span>
        </button>
        <button class="stopwatch-btn stopwatch-lap" id="stopwatch-lap-btn">
          <span class="stopwatch-btn-icon">📍</span>
          <span class="stopwatch-btn-text">랩</span>
        </button>
      </div>
      <div class="stopwatch-laps" id="stopwatch-laps"></div>
    </div>

    <!-- 판서 도구 (수업시간 모드) -->
    <div class="board-container" id="board-container">
      <div class="board-overlay" id="board-overlay"></div>
      <div class="board-text-editor" id="board-text-editor" contenteditable="true"></div>
      <canvas id="board-canvas"></canvas>
      
      <div class="board-toolbar">
        <div class="board-tool-group">
          <button class="tool-btn active" id="text-btn" data-tool="text" title="텍스트 모드">📝</button>
          <button class="tool-btn" id="pen-btn" data-tool="pen" title="펜 모드">✏️</button>
          <button class="tool-btn" id="eraser-btn" data-tool="eraser" title="지우개">✂️</button>
        </div>
        <div class="board-tool-group">
          <label>색상:</label>
          <input type="color" id="color-picker" value="#FFFFFF" title="색상 선택">
        </div>
        <div class="board-tool-group" id="text-size-group">
          <label>글자 크기:</label>
          <input type="range" id="text-size-slider" min="1" max="100" value="24" title="글자 크기">
          <span id="text-size-value">24px</span>
        </div>
        <div class="board-tool-group" id="pen-size-group" style="display: none;">
          <label>붓 크기:</label>
          <input type="range" id="pen-size-slider" min="1" max="50" value="5" title="붓 크기">
          <span id="pen-size-value">5px</span>
        </div>
        <div class="board-tool-group" id="eraser-size-group" style="display: none;">
          <label>지우개 크기:</label>
          <input type="range" id="eraser-size-slider" min="1" max="50" value="10" title="지우개 크기">
          <span id="eraser-size-value">10px</span>
        </div>
        <div class="board-tool-group">
          <button class="tool-btn" id="clear-btn" title="전체 지우기">🗑️</button>
          <button class="tool-btn" id="save-btn" title="이미지 저장">💾</button>
          <button class="tool-btn" id="exit-board-btn" title="판서 모드 종료">❌</button>
        </div>
      </div>
    </div>

    <!-- 아바타 캔버스 -->
    <canvas id="avatar-canvas"></canvas>
  </div>
  
  <!-- 배경 타이머 디스플레이 (우주 모드) -->
  <div class="cosmic-timer-display" id="cosmic-timer-display">10:00</div>

  <!-- 우리반 관리 모달 -->
  <div class="modal-overlay" id="manage-modal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="header-left">
          <h2>⚙️ 우리반 관리</h2>
        </div>
        <div class="header-right">
          <button class="btn btn-danger" id="reset-class">🗑️ 초기화</button>
          <button class="btn btn-primary" id="save-class">💾 저장</button>
          <button class="btn btn-secondary" id="cancel-class">❌ 취소</button>
        </div>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="school-name">학교 이름</label>
          <input type="text" id="school-name" placeholder="예: 서울초등학교" value="서울초등학교">
        </div>
        <div class="form-group">
          <label for="grade">학년</label>
          <input type="number" id="grade" placeholder="예: 3" value="3" min="1" max="6">
        </div>
        <div class="form-group">
          <label for="class-number">반</label>
          <input type="number" id="class-number" placeholder="예: 2" value="2" min="1" max="20">
        </div>
        <div class="form-group">
          <label for="student-count">학생 수</label>
          <input type="number" id="student-count" placeholder="예: 25" value="25" min="1" max="50">
        </div>
        <div class="form-group">
          <label for="today-message">오늘의 메시지</label>
          <textarea id="today-message" rows="3" placeholder="오늘 학생들에게 전하고 싶은 메시지를 입력하세요...">오늘도 화이팅! 💪</textarea>
        </div>
        <div class="form-group">
          <label for="student-names">학생 이름 (줄바꿈으로 구분)</label>
          <textarea id="student-names" rows="8" placeholder="김철수&#10;이영희&#10;박민수&#10;...">김철수
이영희
박민수
정수현
최지훈
한소영
윤태호
임다은
서준혁
강민지
오승현
조은서
배준호
신예린
홍길동
김민정
이동훈
박서연
정현우
최수빈
한지민
윤성호
임서준
강예은
오민재</textarea>
        </div>
        
        <!-- 시간표 입력 -->
        <div class="form-group">
          <label>📅 시간표</label>
          <div class="timetable-container">
            <table class="timetable-input">
              <thead>
                <tr>
                  <th>교시</th>
                  <th>월</th>
                  <th>화</th>
                  <th>수</th>
                  <th>목</th>
                  <th>금</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1교시</td>
                  <td><input type="text" id="mon-1" placeholder="국어"></td>
                  <td><input type="text" id="tue-1" placeholder="수학"></td>
                  <td><input type="text" id="wed-1" placeholder="영어"></td>
                  <td><input type="text" id="thu-1" placeholder="과학"></td>
                  <td><input type="text" id="fri-1" placeholder="사회"></td>
                </tr>
                <tr>
                  <td>2교시</td>
                  <td><input type="text" id="mon-2" placeholder="수학"></td>
                  <td><input type="text" id="tue-2" placeholder="국어"></td>
                  <td><input type="text" id="wed-2" placeholder="체육"></td>
                  <td><input type="text" id="thu-2" placeholder="음악"></td>
                  <td><input type="text" id="fri-2" placeholder="미술"></td>
                </tr>
                <tr>
                  <td>3교시</td>
                  <td><input type="text" id="mon-3" placeholder=""></td>
                  <td><input type="text" id="tue-3" placeholder=""></td>
                  <td><input type="text" id="wed-3" placeholder=""></td>
                  <td><input type="text" id="thu-3" placeholder=""></td>
                  <td><input type="text" id="fri-3" placeholder=""></td>
                </tr>
                <tr>
                  <td>4교시</td>
                  <td><input type="text" id="mon-4" placeholder=""></td>
                  <td><input type="text" id="tue-4" placeholder=""></td>
                  <td><input type="text" id="wed-4" placeholder=""></td>
                  <td><input type="text" id="thu-4" placeholder=""></td>
                  <td><input type="text" id="fri-4" placeholder=""></td>
                </tr>
                <tr>
                  <td>5교시</td>
                  <td><input type="text" id="mon-5" placeholder=""></td>
                  <td><input type="text" id="tue-5" placeholder=""></td>
                  <td><input type="text" id="wed-5" placeholder=""></td>
                  <td><input type="text" id="thu-5" placeholder=""></td>
                  <td><input type="text" id="fri-5" placeholder=""></td>
                </tr>
                <tr>
                  <td>6교시</td>
                  <td><input type="text" id="mon-6" placeholder=""></td>
                  <td><input type="text" id="tue-6" placeholder=""></td>
                  <td><input type="text" id="wed-6" placeholder=""></td>
                  <td><input type="text" id="thu-6" placeholder=""></td>
                  <td><input type="text" id="fri-6" placeholder=""></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        
        <!-- 학습 카드 문제 편집 -->
        <div class="form-group">
          <label>📚 학습 카드 문제 (3개)</label>
          <p class="form-hint">위젯에 표시될 문제를 직접 편집할 수 있습니다. 저장하면 학생들에게도 같은 문제가 출제됩니다.</p>
          
          <!-- 문제 1: 영어 낱말 -->
          <div class="problem-editor">
            <div class="problem-header">
              <span class="problem-label">1️⃣ 영어 낱말</span>
              <button type="button" class="btn-small btn-secondary" id="reset-problem-1">기본값으로</button>
            </div>
            <div class="problem-fields">
              <div class="field-row">
                <label>영어 단어:</label>
                <input type="text" id="problem-1-word" placeholder="happy" value="happy">
              </div>
              <div class="field-row">
                <label>뜻:</label>
                <input type="text" id="problem-1-meaning" placeholder="행복한, 기쁜" value="행복한, 기쁜">
              </div>
              <div class="field-row">
                <label>예문 (영어):</label>
                <input type="text" id="problem-1-example" placeholder="I am happy today." value="I am happy today.">
              </div>
              <div class="field-row">
                <label>예문 (한글):</label>
                <input type="text" id="problem-1-example-ko" placeholder="나는 오늘 행복해요." value="나는 오늘 행복해요.">
              </div>
              <div class="field-row">
                <label>학생 문제:</label>
                <input type="text" id="problem-1-question" placeholder="happy의 뜻은?" value="happy의 뜻은?">
              </div>
              <div class="field-row">
                <label>정답:</label>
                <input type="text" id="problem-1-answer" placeholder="행복한" value="행복한">
              </div>
            </div>
          </div>
          
          <!-- 문제 2: 속담 -->
          <div class="problem-editor">
            <div class="problem-header">
              <span class="problem-label">2️⃣ 속담</span>
              <button type="button" class="btn-small btn-secondary" id="reset-problem-2">기본값으로</button>
            </div>
            <div class="problem-fields">
              <div class="field-row">
                <label>속담 문제:</label>
                <input type="text" id="problem-2-question" placeholder="티끌 모아 ___" value="티끌 모아 ___">
              </div>
              <div class="field-row">
                <label>정답:</label>
                <input type="text" id="problem-2-answer" placeholder="태산" value="태산">
              </div>
              <div class="field-row">
                <label>힌트:</label>
                <input type="text" id="problem-2-hint" placeholder="작은 것도 모으면 커진다" value="작은 것도 모으면 커진다">
              </div>
              <div class="field-row">
                <label>학생 문제:</label>
                <input type="text" id="problem-2-student-question" placeholder="티끌 모아 ___ 빈칸에 들어갈 말은?" value="티끌 모아 ___ 빈칸에 들어갈 말은?">
              </div>
            </div>
          </div>
          
          <!-- 문제 3: 어휘력 -->
          <div class="problem-editor">
            <div class="problem-header">
              <span class="problem-label">3️⃣ 어휘력</span>
              <button type="button" class="btn-small btn-secondary" id="reset-problem-3">기본값으로</button>
            </div>
            <div class="problem-fields">
              <div class="field-row">
                <label>문제:</label>
                <input type="text" id="problem-3-question" placeholder="어려운 일을 포기하지 않고 계속하는 마음" value="어려운 일을 포기하지 않고 계속하는 마음">
              </div>
              <div class="field-row">
                <label>정답:</label>
                <input type="text" id="problem-3-answer" placeholder="끈기" value="끈기">
              </div>
              <div class="field-row">
                <label>힌트:</label>
                <input type="text" id="problem-3-hint" placeholder="인내심과 관련된 단어" value="인내심과 관련된 단어">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 카드 확대 모달 -->
  <div class="modal-overlay" id="card-modal">
    <div class="modal-content card-modal-content">
      <div class="modal-header">
        <div class="header-left">
          <h2 id="card-modal-title">카드 내용</h2>
        </div>
        <div class="header-right">
          <button class="btn btn-secondary" id="close-card-btn">❌ 닫기</button>
        </div>
      </div>
      <div class="modal-body">
        <div class="card-content" id="card-modal-content">
          <!-- 카드 내용이 여기에 표시됩니다 -->
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./src/main.js"></script>
</body>
</html>

