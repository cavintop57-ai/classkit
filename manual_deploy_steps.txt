========================================
🚀 Cloudways 수동 배포 (SSH 타임아웃 대비)
========================================

서버 정보:
  SSH: master_xhbedwcksw@167.172.70.163
  비밀번호: Q1w2e3r4!@
  GitHub: https://github.com/cavintop57-ai/classkit.git


========================================
1단계: GitHub 확인
========================================

✅ 레포 생성됨: https://github.com/cavintop57-ai/classkit


========================================
2단계: SSH 접속
========================================

ssh master_xhbedwcksw@167.172.70.163

비밀번호: Q1w2e3r4!@


========================================
3단계: 최초 클론 (처음 한 번만)
========================================

cd ~ && git clone https://github.com/cavintop57-ai/classkit.git


========================================
4단계: 배포 (전체 복사 → 붙여넣기!)
========================================

cd ~/classkit && git pull origin main && python3 -m pip install --user -r backend/requirements.txt && cd ~/classkit/backend && python3 -m app.init_db && pkill -f uvicorn || true && cd ~/classkit/backend && nohup python3 -m uvicorn app.main:app --host 0.0.0.0 --port 8000 > ~/classkit.log 2>&1 & disown && sleep 3 && curl http://localhost:8000/health


========================================
5단계: 확인
========================================

# 프로세스 확인
ps aux | grep uvicorn

# Health check
curl http://localhost:8000/health

# 로그 확인
tail -20 ~/classkit.log


========================================
✅ 배포 완료!
========================================

접속 URL: http://167.172.70.163:8000


========================================
🎯 위젯 설정
========================================

widget/src/main.js 수정:

const API_BASE = 'http://167.172.70.163:8000/api';
const WS_BASE = 'ws://167.172.70.163:8000';


========================================
🔄 업데이트 (나중에)
========================================

# GitHub 푸시
git add .
git commit -m "✨ Update"
git push

# SSH 접속
ssh master_xhbedwcksw@167.172.70.163

# 원라이너 업데이트
cd ~/classkit && git pull && pkill -f uvicorn && cd backend && source venv/bin/activate && nohup python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 > ~/classkit.log 2>&1 &


========================================
📊 관리 명령어
========================================

# 서비스 상태
ps aux | grep uvicorn

# 로그 실시간
tail -f ~/classkit.log

# 서비스 중지
pkill -f uvicorn

# 포트 확인
netstat -tlnp | grep 8000
